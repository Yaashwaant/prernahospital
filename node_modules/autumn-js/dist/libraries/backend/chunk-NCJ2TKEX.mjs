import {
  withAuth
} from "./chunk-UJBSJTAV.mjs";
import {
  BASE_PATH
} from "./chunk-KSG3E4Q2.mjs";

// src/libraries/backend/routes/referralRoutes.ts
import { addRoute } from "rou3";
var createReferralCodeHandler = (options) => withAuth({
  fn: async ({
    autumn,
    customer_id,
    body
  }) => {
    console.log("Creating referral code for customer: ", customer_id);
    console.log("Body: ", body);
    const res = await autumn.referrals.createCode({
      ...body,
      customer_id
    });
    console.log("Res: ", res);
    return res;
  },
  suppressLogs: options?.suppressLogs
});
var redeemReferralCodeHandler = (options) => withAuth({
  fn: async ({
    autumn,
    customer_id,
    body
  }) => {
    return await autumn.referrals.redeemCode({
      ...body,
      customer_id
    });
  },
  suppressLogs: options?.suppressLogs
});
var addReferralRoutes = async (router, options) => {
  addRoute(router, "POST", `${BASE_PATH}/referrals/code`, {
    handler: createReferralCodeHandler(options)
  });
  addRoute(router, "POST", `${BASE_PATH}/referrals/redeem`, {
    handler: redeemReferralCodeHandler(options)
  });
};

export {
  addReferralRoutes
};
